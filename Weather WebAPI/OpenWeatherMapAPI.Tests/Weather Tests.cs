using System.Threading.Tasks;
using Local_Redis;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Newtonsoft.Json;
using Weather_Models;

namespace OpenWeatherMapAPI.Tests
{
    [TestClass]
    public class Weather_Tests
    {
        private static Redis_Connection redis;

        [TestInitialize]
        public void SetUp()
        {
            redis = new Redis_Connection();
        }

        [TestMethod]
        public void StaticJSONWeather()
        {
            // static JSON response for a Denver current weather request (should be a test within the models) 
            string json = "{\"coord\":{\"lon\":-104.98,\"lat\":39.74},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"base\":\"stations\",\"main\":{\"temp\":277.17,\"pressure\":1023,\"humidity\":74,\"temp_min\":272.15,\"temp_max\":281.15},\"visibility\":16093,\"wind\":{\"speed\":1.5,\"deg\":200},\"clouds\":{\"all\":1},\"dt\":1515206160,\"sys\":{\"type\":1,\"id\":602,\"message\":0.0043,\"country\":\"US\",\"sunrise\":1515248470,\"sunset\":1515282652},\"id\":5419384,\"name\":\"Denver\",\"cod\":200}";

            // we should be able to parse this into a current weather object
            Current_Weather weather = JsonConvert.DeserializeObject<Current_Weather>(json);

            // this object should have a name of "Denver"
            Assert.IsTrue(weather != null && weather.name == "Denver");
        }

        [TestMethod]
        public void StaticJSONForecast()
        {
            // static JSON response for a Phoenix forecast request (should be a test within the models) 
            string json = "{\"cod\":\"200\",\"message\":0.0037,\"cnt\":40,\"list\":[{\"dt\":1515196800,\"main\":{\"temp\":294.33,\"temp_min\":293.291,\"temp_max\":294.33,\"pressure\":980.05,\"sea_level\":1033.08,\"grnd_level\":980.05,\"humidity\":23,\"temp_kf\":1.04},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.22,\"deg\":223.502},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-06 00:00:00\"},{\"dt\":1515207600,\"main\":{\"temp\":284.66,\"temp_min\":283.877,\"temp_max\":284.66,\"pressure\":980.44,\"sea_level\":1034.54,\"grnd_level\":980.44,\"humidity\":45,\"temp_kf\":0.78},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.16,\"deg\":265.502},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-06 03:00:00\"},{\"dt\":1515218400,\"main\":{\"temp\":281.37,\"temp_min\":280.849,\"temp_max\":281.37,\"pressure\":981.14,\"sea_level\":1035.6,\"grnd_level\":981.14,\"humidity\":51,\"temp_kf\":0.52},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.07,\"deg\":345.506},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-06 06:00:00\"},{\"dt\":1515229200,\"main\":{\"temp\":280.48,\"temp_min\":280.225,\"temp_max\":280.48,\"pressure\":980.76,\"sea_level\":1035.47,\"grnd_level\":980.76,\"humidity\":53,\"temp_kf\":0.26},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":24},\"wind\":{\"speed\":1.8,\"deg\":57.5021},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-06 09:00:00\"},{\"dt\":1515240000,\"main\":{\"temp\":280.127,\"temp_min\":280.127,\"temp_max\":280.127,\"pressure\":979.92,\"sea_level\":1034.65,\"grnd_level\":979.92,\"humidity\":50,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":36},\"wind\":{\"speed\":1.35,\"deg\":82.0024},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-06 12:00:00\"},{\"dt\":1515250800,\"main\":{\"temp\":280.103,\"temp_min\":280.103,\"temp_max\":280.103,\"pressure\":980.38,\"sea_level\":1035.15,\"grnd_level\":980.38,\"humidity\":50,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":44},\"wind\":{\"speed\":1.37,\"deg\":78.0008},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-06 15:00:00\"},{\"dt\":1515261600,\"main\":{\"temp\":291.416,\"temp_min\":291.416,\"temp_max\":291.416,\"pressure\":981.29,\"sea_level\":1034.63,\"grnd_level\":981.29,\"humidity\":32,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":2.11,\"deg\":78.0055},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-06 18:00:00\"},{\"dt\":1515272400,\"main\":{\"temp\":294.369,\"temp_min\":294.369,\"temp_max\":294.369,\"pressure\":978.5,\"sea_level\":1031.33,\"grnd_level\":978.5,\"humidity\":30,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":68},\"wind\":{\"speed\":1.76,\"deg\":123.505},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-06 21:00:00\"},{\"dt\":1515283200,\"main\":{\"temp\":292.143,\"temp_min\":292.143,\"temp_max\":292.143,\"pressure\":977.02,\"sea_level\":1029.92,\"grnd_level\":977.02,\"humidity\":28,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":1.2,\"deg\":125.001},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-07 00:00:00\"},{\"dt\":1515294000,\"main\":{\"temp\":286.159,\"temp_min\":286.159,\"temp_max\":286.159,\"pressure\":977.09,\"sea_level\":1030.67,\"grnd_level\":977.09,\"humidity\":46,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":0.91,\"deg\":333.004},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-07 03:00:00\"},{\"dt\":1515304800,\"main\":{\"temp\":283.122,\"temp_min\":283.122,\"temp_max\":283.122,\"pressure\":977.14,\"sea_level\":1031,\"grnd_level\":977.14,\"humidity\":53,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":1.05,\"deg\":341.503},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-07 06:00:00\"},{\"dt\":1515315600,\"main\":{\"temp\":280.878,\"temp_min\":280.878,\"temp_max\":280.878,\"pressure\":977.09,\"sea_level\":1031.08,\"grnd_level\":977.09,\"humidity\":59,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":48},\"wind\":{\"speed\":1.06,\"deg\":341.502},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-07 09:00:00\"},{\"dt\":1515326400,\"main\":{\"temp\":282.078,\"temp_min\":282.078,\"temp_max\":282.078,\"pressure\":976.99,\"sea_level\":1031.34,\"grnd_level\":976.99,\"humidity\":57,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":20},\"wind\":{\"speed\":0.98,\"deg\":13.5077},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-07 12:00:00\"},{\"dt\":1515337200,\"main\":{\"temp\":279.285,\"temp_min\":279.285,\"temp_max\":279.285,\"pressure\":978.32,\"sea_level\":1032.9,\"grnd_level\":978.32,\"humidity\":74,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":0.97,\"deg\":354.503},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-07 15:00:00\"},{\"dt\":1515348000,\"main\":{\"temp\":291.183,\"temp_min\":291.183,\"temp_max\":291.183,\"pressure\":979.31,\"sea_level\":1032.73,\"grnd_level\":979.31,\"humidity\":42,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.87,\"deg\":36.5003},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-07 18:00:00\"},{\"dt\":1515358800,\"main\":{\"temp\":295.098,\"temp_min\":295.098,\"temp_max\":295.098,\"pressure\":977.28,\"sea_level\":1030.02,\"grnd_level\":977.28,\"humidity\":40,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.52,\"deg\":160.504},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-07 21:00:00\"},{\"dt\":1515369600,\"main\":{\"temp\":293.554,\"temp_min\":293.554,\"temp_max\":293.554,\"pressure\":977.03,\"sea_level\":1029.98,\"grnd_level\":977.03,\"humidity\":35,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.31,\"deg\":218.5},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-08 00:00:00\"},{\"dt\":1515380400,\"main\":{\"temp\":284.192,\"temp_min\":284.192,\"temp_max\":284.192,\"pressure\":978.14,\"sea_level\":1032.21,\"grnd_level\":978.14,\"humidity\":65,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.06,\"deg\":235.501},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-08 03:00:00\"},{\"dt\":1515391200,\"main\":{\"temp\":280.679,\"temp_min\":280.679,\"temp_max\":280.679,\"pressure\":978.6,\"sea_level\":1033.14,\"grnd_level\":978.6,\"humidity\":77,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":1.16,\"deg\":348},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-08 06:00:00\"},{\"dt\":1515402000,\"main\":{\"temp\":279.47,\"temp_min\":279.47,\"temp_max\":279.47,\"pressure\":978.33,\"sea_level\":1033.25,\"grnd_level\":978.33,\"humidity\":75,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.4,\"deg\":60.0014},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-08 09:00:00\"},{\"dt\":1515412800,\"main\":{\"temp\":277.703,\"temp_min\":277.703,\"temp_max\":277.703,\"pressure\":978.43,\"sea_level\":1033.35,\"grnd_level\":978.43,\"humidity\":76,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":1.12,\"deg\":26.0013},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-08 12:00:00\"},{\"dt\":1515423600,\"main\":{\"temp\":277.086,\"temp_min\":277.086,\"temp_max\":277.086,\"pressure\":979.05,\"sea_level\":1034.12,\"grnd_level\":979.05,\"humidity\":77,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":24},\"wind\":{\"speed\":1.22,\"deg\":19.5014},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-08 15:00:00\"},{\"dt\":1515434400,\"main\":{\"temp\":288.997,\"temp_min\":288.997,\"temp_max\":288.997,\"pressure\":979.48,\"sea_level\":1033.12,\"grnd_level\":979.48,\"humidity\":43,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.86,\"deg\":52.5008},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-08 18:00:00\"},{\"dt\":1515445200,\"main\":{\"temp\":293.561,\"temp_min\":293.561,\"temp_max\":293.561,\"pressure\":977.15,\"sea_level\":1030.04,\"grnd_level\":977.15,\"humidity\":39,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":64},\"wind\":{\"speed\":1.72,\"deg\":153.504},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-08 21:00:00\"},{\"dt\":1515456000,\"main\":{\"temp\":292.464,\"temp_min\":292.464,\"temp_max\":292.464,\"pressure\":977.06,\"sea_level\":1030.04,\"grnd_level\":977.06,\"humidity\":35,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":1.22,\"deg\":234.513},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-09 00:00:00\"},{\"dt\":1515466800,\"main\":{\"temp\":286.335,\"temp_min\":286.335,\"temp_max\":286.335,\"pressure\":977.42,\"sea_level\":1031.19,\"grnd_level\":977.42,\"humidity\":55,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":1.17,\"deg\":294.002},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-09 03:00:00\"},{\"dt\":1515477600,\"main\":{\"temp\":283.835,\"temp_min\":283.835,\"temp_max\":283.835,\"pressure\":978.08,\"sea_level\":1032.16,\"grnd_level\":978.08,\"humidity\":62,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":56},\"wind\":{\"speed\":0.91,\"deg\":313.5},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-09 06:00:00\"},{\"dt\":1515488400,\"main\":{\"temp\":281.027,\"temp_min\":281.027,\"temp_max\":281.027,\"pressure\":977.91,\"sea_level\":1032.34,\"grnd_level\":977.91,\"humidity\":67,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":0.91,\"deg\":60.0013},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-09 09:00:00\"},{\"dt\":1515499200,\"main\":{\"temp\":279.179,\"temp_min\":279.179,\"temp_max\":279.179,\"pressure\":978.09,\"sea_level\":1032.77,\"grnd_level\":978.09,\"humidity\":68,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.06,\"deg\":56.0001},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-09 12:00:00\"},{\"dt\":1515510000,\"main\":{\"temp\":278.515,\"temp_min\":278.515,\"temp_max\":278.515,\"pressure\":979.49,\"sea_level\":1034.18,\"grnd_level\":979.49,\"humidity\":70,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.67,\"deg\":23.5036},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-09 15:00:00\"},{\"dt\":1515520800,\"main\":{\"temp\":290.857,\"temp_min\":290.857,\"temp_max\":290.857,\"pressure\":980.38,\"sea_level\":1033.61,\"grnd_level\":980.38,\"humidity\":41,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.83,\"deg\":47.5012},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-09 18:00:00\"},{\"dt\":1515531600,\"main\":{\"temp\":295.848,\"temp_min\":295.848,\"temp_max\":295.848,\"pressure\":977.77,\"sea_level\":1030.5,\"grnd_level\":977.77,\"humidity\":38,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.56,\"deg\":145.503},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-09 21:00:00\"},{\"dt\":1515542400,\"main\":{\"temp\":294.199,\"temp_min\":294.199,\"temp_max\":294.199,\"pressure\":977.26,\"sea_level\":1030.03,\"grnd_level\":977.26,\"humidity\":32,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":0.72,\"deg\":201.503},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-10 00:00:00\"},{\"dt\":1515553200,\"main\":{\"temp\":284.783,\"temp_min\":284.783,\"temp_max\":284.783,\"pressure\":977.55,\"sea_level\":1031.21,\"grnd_level\":977.55,\"humidity\":60,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":0.41,\"deg\":287.012},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-10 03:00:00\"},{\"dt\":1515564000,\"main\":{\"temp\":283.478,\"temp_min\":283.478,\"temp_max\":283.478,\"pressure\":977.89,\"sea_level\":1031.9,\"grnd_level\":977.89,\"humidity\":60,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":56},\"wind\":{\"speed\":1.2,\"deg\":344.003},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-10 06:00:00\"},{\"dt\":1515574800,\"main\":{\"temp\":282.626,\"temp_min\":282.626,\"temp_max\":282.626,\"pressure\":977.15,\"sea_level\":1031.34,\"grnd_level\":977.15,\"humidity\":58,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":12},\"wind\":{\"speed\":0.95,\"deg\":52.0004},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-10 09:00:00\"},{\"dt\":1515585600,\"main\":{\"temp\":281.933,\"temp_min\":281.933,\"temp_max\":281.933,\"pressure\":976.68,\"sea_level\":1030.92,\"grnd_level\":976.68,\"humidity\":62,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":36},\"wind\":{\"speed\":1.61,\"deg\":47.5003},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2018-01-10 12:00:00\"},{\"dt\":1515596400,\"main\":{\"temp\":281.093,\"temp_min\":281.093,\"temp_max\":281.093,\"pressure\":977.34,\"sea_level\":1031.7,\"grnd_level\":977.34,\"humidity\":64,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":24},\"wind\":{\"speed\":1.37,\"deg\":39.0018},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-10 15:00:00\"},{\"dt\":1515607200,\"main\":{\"temp\":291.076,\"temp_min\":291.076,\"temp_max\":291.076,\"pressure\":977.34,\"sea_level\":1030.52,\"grnd_level\":977.34,\"humidity\":38,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":2.22,\"deg\":68.5038},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-10 18:00:00\"},{\"dt\":1515618000,\"main\":{\"temp\":293.766,\"temp_min\":293.766,\"temp_max\":293.766,\"pressure\":975.52,\"sea_level\":1028.2,\"grnd_level\":975.52,\"humidity\":38,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":1.88,\"deg\":163.504},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2018-01-10 21:00:00\"}],\"city\":{\"id\":5308655,\"name\":\"Phoenix\",\"coord\":{\"lat\":33.4484,\"lon\":-112.0741},\"country\":\"US\"}}";

            // we should be able to parse this into a forecast object
            Forecast forecast = JsonConvert.DeserializeObject<Forecast>(json);

            // this object should have a city name of "Phoenix"
            Assert.IsTrue(forecast != null && forecast.city != null && forecast.city.name == "Phoenix");
        }

        [TestMethod]
        public async Task GetWeather()
        {
            // make a request to get the current weather in Phoenix
            //  id=5308655
            string json = await Requests.Weather.Current(5308655, redis);

            // we should be able to parse this into a current weather object
            Current_Weather weather = JsonConvert.DeserializeObject<Current_Weather>(json);

            // the object should have a city name of Phoenix
            Assert.IsTrue(weather != null && weather.name == "Phoenix");
        }

        [TestMethod]
        public async Task GetForecast()
        {
            // make a request to get the forecasted weather in Phoenix
            //  id=5308655
            string json = await Requests.Weather.Forecast(5308655, redis);

            // we should be able to parse this into a forecast object
            Forecast forecast = JsonConvert.DeserializeObject<Forecast>(json);

            // the object should have a city name of Phoenix
            Assert.IsTrue(forecast != null && forecast.city != null && forecast.city.name == "Phoenix");
        }

        [TestCleanup]
        public void TearDown()
        {
            redis.Dispose();
        }
    }
}
